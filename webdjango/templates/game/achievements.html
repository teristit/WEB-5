{% extends 'game/base.html' %}

{% block title %}–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è - Django Platformer{% endblock %}

{% block content %}
<div class="card">
    <h1>‚≠ê –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h1>
    <p style="font-size: 1.1rem; margin-bottom: 2rem;">
        –†–∞–∑–±–ª–æ–∫–∏—Ä—É–π—Ç–µ –Ω–∞–≥—Ä–∞–¥—ã –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ—Å–æ–±—ã—Ö —É—Å–ª–æ–≤–∏–π
    </p>

    {% if user.is_authenticated %}
    <div style="margin-bottom: 2rem; padding: 1rem; background: rgba(255, 255, 255, 0.1); border-radius: 8px;">
        <strong>üèÜ –í–∞—à –ø—Ä–æ–≥—Ä–µ—Å—Å:</strong> 
        {{ player_achievements|length }} / {{ achievements|length }} –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π –ø–æ–ª—É—á–µ–Ω–æ
        {% if achievements %}
        ({{ player_achievements|length|floatformat:0 }}%)
        {% endif %}
    </div>
    {% endif %}

    {% if achievements %}
    <div class="grid">
        {% for achievement in achievements %}
        {% with earned=achievement.id in player_achievements %}
        <div class="grid-item" style="{% if earned %}background: rgba(255, 215, 0, 0.2); border-color: rgba(255, 215, 0, 0.5);{% else %}opacity: 0.6;{% endif %}">
            <div style="font-size: 3rem; text-align: center; margin-bottom: 0.5rem;">
                {{ achievement.icon }}
            </div>
            <h3 style="text-align: center;">
                {{ achievement.name }}
                {% if earned %}
                    <span style="color: #ffd700;">‚úì</span>
                {% else %}
                    <span style="opacity: 0.5;">üîí</span>
                {% endif %}
            </h3>
            <p style="text-align: center; margin-top: 0.5rem;">
                {{ achievement.description }}
            </p>
            <div style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid rgba(255, 255, 255, 0.1); text-align: center;">
                <strong>–¢–∏–ø:</strong> 
                {% if achievement.achievement_type == 'score' %}üéØ –û—á–∫–∏
                {% elif achievement.achievement_type == 'level' %}üéÆ –£—Ä–æ–≤–µ–Ω—å
                {% elif achievement.achievement_type == 'time' %}‚è±Ô∏è –í—Ä–µ–º—è
                {% else %}‚ú® –û—Å–æ–±–æ–µ
                {% endif %}
                <br>
                <strong>–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:</strong> {{ achievement.requirement }}
                <br>
                <strong>–û—á–∫–∏:</strong> +{{ achievement.points }}
            </div>
            {% if earned %}
            <div style="margin-top: 0.5rem; text-align: center; color: #ffd700; font-weight: bold;">
                ‚úÖ –ü–æ–ª—É—á–µ–Ω–æ!
            </div>
            {% endif %}
        </div>
        {% endwith %}
        {% endfor %}
    </div>
    {% else %}
    <div style="text-align: center; padding: 3rem;">
        <p style="font-size: 1.2rem; margin-bottom: 1rem;">‚ú® –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è –ø–æ–∫–∞ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã</p>
        <p>–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –º–æ–∂–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è.</p>
        {% if user.is_staff %}
        <a href="/admin/game/achievement/add/" class="btn btn-primary" style="margin-top: 1.5rem;">
            –î–æ–±–∞–≤–∏—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ ‚Üí
        </a>
        {% endif %}
    </div>
    {% endif %}
</div>

{% if not user.is_authenticated %}
<div class="card" style="text-align: center; background: rgba(255, 215, 0, 0.1); border: 2px solid rgba(255, 215, 0, 0.3);">
    <h2>üîê –í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h2>
    <p style="margin: 1rem 0;">
        –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –∏–ª–∏ –≤–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Å–≤–æ–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
    </p>
    <button onclick="showLoginModal()" class="btn btn-primary">–í–æ–π—Ç–∏</button>
</div>
{% endif %}

<div class="card" style="text-align: center;">
    <a href="/" class="btn">‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é</a>
    <a href="{% url 'game:game' %}" class="btn btn-primary">–ò–≥—Ä–∞—Ç—å üéÆ</a>
</div>
{% endblock %}

{% block extra_js %}
<script>
function showLoginModal() {
    alert('–§—É–Ω–∫—Ü–∏—è –≤—Ö–æ–¥–∞ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ /admin/ –¥–ª—è –≤—Ö–æ–¥–∞.');
}
</script>
{% endblock %}
